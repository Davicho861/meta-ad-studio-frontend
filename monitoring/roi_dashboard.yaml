apiVersion: 1
providers:
- name: 'default'
  orgId: 1
  folder: ''
  type: file
  disableDeletion: false
  editable: true
  options:
    path: /var/lib/grafana/dashboards/default

- name: 'roi-dashboard'
  orgId: 1
  folder: 'Business Metrics'
  type: file
  disableDeletion: false
  editable: true
  options:
    path: /var/lib/grafana/dashboards/roi

- dashboard:
    __inputs:
    - name: DS_PROMETHEUS
      label: Prometheus
      description: Prometheus data source
      type: datasource
      pluginId: prometheus
      pluginName: Prometheus
    annotations:
      list:
      - builtIn: 1
        datasource: -- Grafana --
        enable: true
        hide: true
        iconColor: rgba(0, 211, 255, 1)
        name: Annotations & Alerts
        type: dashboard
    editable: true
    gnetId: null
    graphTooltip: 0
    id: null
    links: []
    panels:
    - gridPos:
        h: 8
        w: 12
        x: 0
        y: 0
      id: 2
      title: "User Growth vs. Revenue"
      type: timeseries
      datasource: ${DS_PROMETHEUS}
      targets:
      - expr: 'sum(increase(user_sessions_total[1h]))'
        legendFormat: "User Growth"
      - expr: 'sum(increase(revenue_total[1h]))'
        legendFormat: "Revenue Growth"
    - gridPos:
        h: 8
        w: 12
        x: 12
        y: 0
      id: 4
      title: "Cloud Spend vs. Cost Savings"
      type: timeseries
      datasource: ${DS_PROMETHEUS}
      targets:
      - expr: 'sum(increase(cloud_spend_total[1h]))'
        legendFormat: "Cloud Spend"
      - expr: 'sum(increase(cost_savings_total[1h]))'
        legendFormat: "Cost Savings"
    - gridPos:
        h: 8
        w: 24
        x: 0
        y: 8
      id: 6
      title: "P99 Latency vs. Conversion Rate"
      type: timeseries
      datasource: ${DS_PROMETHEUS}
      targets:
      - expr: 'histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket[5m])) by (le))'
        legendFormat: "P99 Latency"
      - expr: 'sum(rate(conversion_total[1h]))'
        legendFormat: "Conversion Rate"
    refresh: 5s
    schemaVersion: 17
    style: dark
    tags:
    - roi
    - business-metrics
    templating:
      list: []
    time:
      from: now-6h
      to: now
    timepicker:
      refresh_intervals:
      - 5s
      - 10s
      - 30s
      - 1m
      - 5m
      - 15m
      - 30m
      - 1h
      - 2h
      - 1d
    timezone: browser
    title: ROI & Business KPIs Dashboard
    version: 0
