# Infinite Scalability Horizon - Multi-Cloud Federation Configuration
# This file defines the strategy for federating workloads across multiple cloud providers.
# The goal is to achieve near-infinite scalability, resilience, and cost-optimization.

# Federation mode: 'active-active' for load balancing, 'active-passive' for failover.
federation_mode: active-active

providers:
  - name: gcp
    region: us-central1
    priority: 1
    enabled: true
    # K8s context name for this cluster
    kubernetes_context: gke_meta-ad-studio_us-central1_staging-gke-cluster
  - name: aws
    region: us-east-1
    priority: 2
    enabled: false
    kubernetes_context: arn:aws:eks:us-east-1:123456789012:cluster/eks-main
  - name: azure
    region: eastus
    priority: 3
    enabled: false
    kubernetes_context: aks-main-cluster

# Traffic splitting rules for active-active mode.
traffic_management:
  - provider: gcp
    weight: 50
  - provider: aws
    weight: 40
  - provider: azure
    weight: 10

# Autoscaling policy across the federation.
# This will be managed by a federated HPA controller.
autoscaling:
  min_replicas_global: 10
  max_replicas_global: 10000 # Near-infinite scale
  cpu_utilization_percentage: 60
  # Policy to scale up in low-carbon regions first.
  green_scaling_policy:
    enabled: true
    preferred_regions:
      - gcp:us-central1 # Known low-carbon region
      - aws:us-west-2

# Health checks and failover policy.
# If a provider fails health checks, its traffic weight is redistributed.
health_checks:
  endpoint: /healthz
  interval_seconds: 15
  timeout_seconds: 5
  failure_threshold: 3
  automatic_failover: true
